[debug] [2021-01-12T20:38:57.951Z] ----------------------------------------------------------------------
[debug] [2021-01-12T20:38:57.952Z] Command:       /Users/faraz.ahmad/.nvm/versions/node/v10.15.3/bin/node /Users/faraz.ahmad/Workspace/retro/web/functions/node_modules/.bin/firebase deploy --project dev --only functions
[debug] [2021-01-12T20:38:57.952Z] CLI Version:   7.16.2
[debug] [2021-01-12T20:38:57.952Z] Platform:      darwin
[debug] [2021-01-12T20:38:57.952Z] Node Version:  v10.15.3
[debug] [2021-01-12T20:38:57.953Z] Time:          Tue Jan 12 2021 15:38:57 GMT-0500 (Eastern Standard Time)
[debug] [2021-01-12T20:38:57.953Z] ----------------------------------------------------------------------
[debug] [2021-01-12T20:38:57.953Z] 
[debug] [2021-01-12T20:38:57.960Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2021-01-12T20:38:57.960Z] > authorizing via signed-in user
[debug] [2021-01-12T20:38:57.961Z] [iam] checking project retro-dev-786 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2021-01-12T20:38:57.963Z] >>> HTTP REQUEST POST https://cloudresourcemanager.googleapis.com/v1/projects/retro-dev-786:testIamPermissions  

[debug] [2021-01-12T20:38:58.153Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'retro-dev-786'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix functions run build
[info] ✔  functions: Finished running predeploy script.
[debug] [2021-01-12T20:39:03.320Z] > [functions] package.json contents: {
  "name": "functions",
  "private": true,
  "version": "1.0.0",
  "scripts": {
    "lint": "tslint --project tsconfig.json",
    "prettier": "prettier \"src/**/*.{js,json,ts}\" --write",
    "build": "tsc",
    "deploy:dev": "firebase deploy --project dev --only functions",
    "deploy:prod": "firebase deploy --project prod --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "10"
  },
  "main": "build/index.js",
  "dependencies": {
    "@types/lodash": "^4.14.152",
    "airtable": "^0.8.1",
    "cors": "^2.8.5",
    "firebase-admin": "^8.6.0",
    "firebase-functions": "^3.3.0",
    "lodash": "^4.17.15",
    "moment": "^2.26.0",
    "node-mailjet": "^3.3.1",
    "request": "^2.88.2",
    "stripe": "^8.130.0"
  },
  "devDependencies": {
    "@types/airtable": "^0.5.7",
    "@types/cors": "^2.8.6",
    "@types/node": "^14.0.6",
    "@types/node-mailjet": "^3.3.3",
    "@types/request": "^2.48.5",
    "firebase-functions-test": "^0.1.6",
    "firebase-tools": "^7.14.0",
    "prettier": "^2.0.5",
    "tslint": "^5.12.0",
    "typescript": "^3.2.2"
  }
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2021-01-12T20:39:03.322Z] >>> HTTP REQUEST GET https://serviceusage.googleapis.com/v1/projects/retro-dev-786/services/cloudfunctions.googleapis.com  
 
[debug] [2021-01-12T20:39:03.322Z] >>> HTTP REQUEST GET https://serviceusage.googleapis.com/v1/projects/retro-dev-786/services/runtimeconfig.googleapis.com  
 
[debug] [2021-01-12T20:39:03.779Z] <<< HTTP RESPONSE 200
[debug] [2021-01-12T20:39:03.787Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2021-01-12T20:39:03.788Z] >>> HTTP REQUEST GET https://firebase.googleapis.com/v1beta1/projects/retro-dev-786/adminSdkConfig  
 
[debug] [2021-01-12T20:39:04.270Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2021-01-12T20:39:04.273Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/retro-dev-786/configs  
 
[debug] [2021-01-12T20:39:04.464Z] <<< HTTP RESPONSE 200
[debug] [2021-01-12T20:39:04.465Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/retro-dev-786/configs/stripe/variables  
 
[debug] [2021-01-12T20:39:04.466Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/retro-dev-786/configs/airtable/variables  
 
[debug] [2021-01-12T20:39:04.466Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/retro-dev-786/configs/mailjet/variables  
 
[debug] [2021-01-12T20:39:04.466Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/retro-dev-786/configs/slack/variables  
 
[debug] [2021-01-12T20:39:04.605Z] <<< HTTP RESPONSE 200
[debug] [2021-01-12T20:39:04.606Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/retro-dev-786/configs/slack/variables/signing_secret  
 
[debug] [2021-01-12T20:39:04.607Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/retro-dev-786/configs/slack/variables/token  
 
[debug] [2021-01-12T20:39:04.609Z] <<< HTTP RESPONSE 200
[debug] [2021-01-12T20:39:04.610Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/retro-dev-786/configs/stripe/variables/secret_key  
 
[debug] [2021-01-12T20:39:04.610Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/retro-dev-786/configs/stripe/variables/publishable_key  
 
[debug] [2021-01-12T20:39:04.635Z] <<< HTTP RESPONSE 200
[debug] [2021-01-12T20:39:04.635Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/retro-dev-786/configs/mailjet/variables/api_key  
 
[debug] [2021-01-12T20:39:04.636Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/retro-dev-786/configs/mailjet/variables/api_secret  
 
[debug] [2021-01-12T20:39:04.676Z] <<< HTTP RESPONSE 200
[debug] [2021-01-12T20:39:04.677Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/retro-dev-786/configs/airtable/variables/api_key  
 
[debug] [2021-01-12T20:39:04.692Z] <<< HTTP RESPONSE 200
[debug] [2021-01-12T20:39:04.723Z] <<< HTTP RESPONSE 200
[debug] [2021-01-12T20:39:04.752Z] <<< HTTP RESPONSE 200
[debug] [2021-01-12T20:39:04.763Z] <<< HTTP RESPONSE 200
[debug] [2021-01-12T20:39:04.793Z] <<< HTTP RESPONSE 200
[debug] [2021-01-12T20:39:04.807Z] <<< HTTP RESPONSE 200
[debug] [2021-01-12T20:39:04.868Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (157.94 KB) for uploading
[debug] [2021-01-12T20:39:05.871Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/retro-dev-786/locations/us-central1/functions:generateUploadUrl  
 
[debug] [2021-01-12T20:39:06.696Z] <<< HTTP RESPONSE 200
[debug] [2021-01-12T20:39:06.697Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-9fdc217a-474a-48c9-8a38-2d5656c55c60/15b59b88-5cb7-4282-92a2-a0b66e4dbf5b.zip?GoogleAccessId=service-90646101192@gcf-admin-robot.iam.gserviceaccount.com&Expires=1610485746&Signature=hHXQHMYntI9Q8Ez7MxTa9VV3OGYb1lifhY4CweKIMcsBdJtT5hfMBdj3pju6tA8kUnED1R1xYTgg7OWmgdVHU6W1VF62z%2F3uzC5F4Hsxd8P6MO92fHByWaHQAipiaaSAanjXddOoXABrOq9DEc0Ahe44dhXSmI7XGp2%2F4agIxHl1jzp2njnZaGE5%2FCjBMxHwdCOuA5xXVay0fY1pJnSkbMAX0naiWvLEuXFA%2BOsdbnQ5b8N52ldaeCMBXkpjaqRdDQIJTmzmD1P9K8KopyDs0tBq9IfcvDphrCVSpLS%2FitK258WEtgbvvKeGQzct3A8NRDIgKKObSxQFjQyFumOV7Q%3D%3D  
 <request body omitted>
[debug] [2021-01-12T20:39:06.952Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[debug] [2021-01-12T20:39:06.955Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/retro-dev-786/locations/-/functions  
 
[debug] [2021-01-12T20:39:07.528Z] <<< HTTP RESPONSE 200
[info] i  functions: updating Node.js 10 (Beta) function createMailjetContact(us-central1)...
[debug] [2021-01-12T20:39:07.531Z] Trigger is:  {"eventTrigger":{"resource":"projects/retro-dev-786","eventType":"providers/firebase.auth/eventTypes/user.create","service":"firebaseauth.googleapis.com"}}
[info] i  functions: updating Node.js 10 (Beta) function createUser(us-central1)...
[debug] [2021-01-12T20:39:07.531Z] Trigger is:  {"eventTrigger":{"resource":"projects/retro-dev-786","eventType":"providers/firebase.auth/eventTypes/user.create","service":"firebaseauth.googleapis.com"}}
[info] i  functions: updating Node.js 10 (Beta) function createStripeBillingPortalSession(us-central1)...
[debug] [2021-01-12T20:39:07.532Z] Trigger is:  {"httpsTrigger":{}}
[info] i  functions: updating Node.js 10 (Beta) function addWorkspaceToAirtable(us-central1)...
[debug] [2021-01-12T20:39:07.532Z] Trigger is:  {"eventTrigger":{"resource":"projects/retro-dev-786/databases/(default)/documents/workspace/{workspaceId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[info] i  functions: updating Node.js 10 (Beta) function alertWorkspaceCreated(us-central1)...
[debug] [2021-01-12T20:39:07.532Z] Trigger is:  {"eventTrigger":{"resource":"projects/retro-dev-786/databases/(default)/documents/workspace/{workspaceId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[info] i  functions: updating Node.js 10 (Beta) function createStripeCustomerSubscription(us-central1)...
[debug] [2021-01-12T20:39:07.532Z] Trigger is:  {"eventTrigger":{"resource":"projects/retro-dev-786/databases/(default)/documents/workspace/{workspaceId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[info] i  functions: updating Node.js 10 (Beta) function sendInvitationEmail(us-central1)...
[debug] [2021-01-12T20:39:07.533Z] Trigger is:  {"eventTrigger":{"resource":"projects/retro-dev-786/databases/(default)/documents/workspaceInvite/{workspaceId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[info] 
The following functions are found in your project but do not exist in your local source code:
	getStripeSubscriptionStatus(us-central1)

If you are renaming a function or changing its region, it is recommended that you create the new function first before deleting the old one to prevent event loss. For more info, visit https://firebase.google.com/docs/functions/manage-functions#modify

